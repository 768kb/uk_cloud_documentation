<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html>
  
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Managed IT Operations prerequisites </title>
    <meta name="viewport" content="width=device-width">
    <meta name="title" content="Managed IT Operations prerequisites ">
    <meta name="generator" content="docfx 2.59.2.0">
    
    <link rel="shortcut icon" href="../../favicon.ico">
    <link rel="stylesheet" href="../../styles/docfx.vendor.css">
    <link rel="stylesheet" href="../../styles/docfx.css">
    <link rel="stylesheet" href="../../styles/main.css">
    <meta property="docfx:navrel" content="../../toc.html">
    <meta property="docfx:tocrel" content="toc.html">
    
    <meta property="docfx:rel" content="../../">
    
  </head>
  <body data-spy="scroll" data-target="#affix" data-offset="120">
    <div id="wrapper">
      <header>
        
        <nav id="autocollapse" class="navbar navbar-inverse ng-scope" role="navigation">
          <div class="container-fluid">
            <div class="navbar-margin-left">
              <div class="navbar-header">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar">
                  <span class="sr-only">Toggle navigation</span>
                  <span class="icon-bar"></span>
                  <span class="icon-bar"></span>
                  <span class="icon-bar"></span>
                </button>
                
                <a class="navbar-brand" href="../../index.html">
                  <img id="logo" class="svg" src="../../styles/assets/logo.png" srcset="../../styles/assets/logo@2x.png 2x" width="300" height="49" alt="">
                </a>
              </div>
              <div class="collapse navbar-collapse" id="navbar">
                <form class="navbar-form navbar-right" role="search" id="search">
                  <div class="form-group">
                    <input type="text" class="form-control" id="search-query" placeholder="Search" autocomplete="off">
                  </div>
                </form>
              </div>
            </div>
          </div>
        </nav>
        
        <div class="navbar-borderless subnav navbar navbar-default">
          <div class="navbar-right subnav-margin-right">
              <div class="contribution">
                <ul class="nav">
                  <li>
                    <a href="https://github.com/UKCloud/documentation/blob/master/articles/managed-operations/man-ref-customer-prereqs.md/#L1" class="contribution-link">Improve this Doc</a>
                  </li>
                </ul>
              </div>
          </div>
          <div class="hide-when-search subnav-margin-left" id="breadcrumb">
            <ul class="breadcrumb">
              <li></li>
            </ul>
          </div>
        </div>
      </header>
      <div class="container body-content">
        
        <div id="search-results">
          <div class="search-list"></div>
          <div class="sr-items">
            <p><i class="glyphicon glyphicon-refresh index-loading"></i></p>
          </div>
          <ul id="pagination"></ul>
        </div>
      </div>
      <div role="main" class="container-fluid body-content hide-when-search">
        
        <div class="sidenav hide-when-search">
          <a class="btn toc-toggle collapse" data-toggle="collapse" href="#sidetoggle" aria-expanded="false" aria-controls="sidetoggle">Show / Hide Table of Contents</a>
          <div class="sidetoggle collapse" id="sidetoggle">
            <div id="sidetoc"></div>
          </div>
        </div>
        <div class="article row grid-right">
          <div class="container-fluid">
            <div class="row">
              <div class="col-lg-10">
                <article class="content wrap" id="_content" data-uid="">
                  
<h1 id="managed-it-operations-prerequisites">Managed IT Operations prerequisites</h1>

<h2 id="overview">Overview</h2>
<p>Managed IT Operations helps to reduce the non-value add challenges of managing your compute assets, whilst increasing your overall level of trust and confidence in the true health of your entire multi-cloud estate. For more information, see the <a href="man-sd-managed-it-ops.html"><em>Managed IT Operations Service Definition</em></a>.</p>
<p>Before UKCloud can begin onboarding your virtual machines onto this service, your environment <strong>must</strong> meet the the prerequisites outlined in this article.</p>
<h2 id="managed-monitoring-as-a-service">Managed Monitoring as a Service</h2>
<p>With Managed Monitoring as a Service, UKCloud becomes your first line of support, 24 hours a day, 365 days a year, receiving and reacting to any abnormal events or alerts across your IT estate. For more information, see the <a href="man-sco-monitoring.html"><em>Managed Monitoring as a Service Service Scope</em></a>.</p>
<p>By default, UKCloud provides this service without the use of an agent by utilising SNMP traps. In situations where we need to collect non-SNMP events, we may opt to provide a dedicated Monitoring Agent, which can be deployed on to your virtual machines to provide a more advanced method of event collection.</p>
<h3 id="customer-environment-configuration">Customer environment configuration</h3>
<p>Ensure the following ports listed below are permitted on both your perimeter and operating system firewalls from the UKCloud management bubble subnet. UKCloud will provide you with the subnet.</p>
<h4 id="linux--windows-server-agentless">Linux &amp; Windows Server (Agentless)</h4>
<ul>
<li><p>Simple Network Management Protocol (SNMP) - UDP/161</p>
</li>
<li><p>Internet Control Message Protocol (ICMP)</p>
</li>
</ul>
<h4 id="linux-agent-based">Linux (Agent-based)</h4>
<ul>
<li><p>Nagios Remote Plugin Executor (NRPE) - TCP/5666</p>
</li>
<li><p>Internet Control Message Protocol (ICMP)</p>
</li>
</ul>
<h4 id="windows-server-agent-based">Windows Server (Agent-based)</h4>
<ul>
<li><p>Nagios Remote Plugin Executor (NRPE) - TCP/5666</p>
</li>
<li><p>Windows Remote Management (WinRM) - TCP/5985 &amp; TCP/5986</p>
</li>
<li><p>Internet Control Message Protocol (ICMP)</p>
</li>
</ul>
<div class="NOTE">
<h5>Note</h5>
<p>Add any custom ports you'd like monitored. For example, to monitor the state of a web server on port TCP/443, port TCP/443 must be allowed through from the UKCloud management bubble subnet.</p>
</div>
<h3 id="operating-system-services">Operating system services</h3>
<p>SNMP is required for agentless monitoring.</p>
<div class="NOTE">
<h5>Note</h5>
<p>The SNMP service <strong>must</strong> be configured to start on boot.</p>
</div>
<h4 id="linux">Linux</h4>
<p>On Linux, you can install SNMP from the operating system's public repository.</p>
<h4 id="windows-server">Windows Server</h4>
<p>On Windows Server, you can install SNMP through the Roles and Features wizard.</p>
<h3 id="vpn-configuration">VPN configuration</h3>
<p>Managed Monitoring as a Service relies on an IPsec VPN being configured on your environment's edge appliance. For VMware, this will be an edge gateway, whereas in OpenStack this will be a customer deployed (or assisted by UKCloud) VPN server. By default, UKCloud recommends a pfSense appliance.</p>
<p>UKCloud will provide you with the VPN standards and configuration, including the pre-shared key, peer endpoint and peer subnet to configure the VPN.</p>
<h2 id="anti-virus-as-a-service">Anti-Virus as a Service</h2>
<p>Anti-Virus as a Service provides you with the confidence that your environments are protected from the dangers of viruses and malware, all without the usual headaches associated with the deployment, management, and operation of an antivirus solution. For more information see the <a href="man-sco-antivirus.html"><em>Anti-Virus as a Service Service Scope</em></a>.</p>
<p>UKCloud will provide you with the installation <em>package(s)</em> and commands to install and configure the antivirus agent on your virtual machines.</p>
<h2 id="patching-as-a-service">Patching as a Service</h2>
<p>Patching as a Service provides routine OS patch management for compute instances. It helps you accelerate business value by removing the burden of basic OS hygiene, letting you focus your attention above the operating system. For more information, see the <a href="man-sco-patching.html"><em>Patching as a Service Service Scope</em></a>.</p>
<h3 id="operating-systems">Operating systems</h3>
<p>UKCloud only supports in-life, vendor-backed operating systems, such as Microsoft Windows, Red Hat Enterprise Linux and Canonical Ubuntu. Customer-built operating systems (for example Gentoo Linux custom build) are unsupported by this service. Virtual software appliances are also unsupported by this service.</p>
<h3 id="customer-environment-configuration-1">Customer environment configuration</h3>
<p>If you've opted for taking snapshots of your virtual machines prior to patching, then the environment must be hosted in VMware and the name of the virtual machine(s) in Cloud Director must match the hostname in the OS.</p>
<h4 id="linux-1">Linux</h4>
<p>To provide secure communication between UKCloud's centralised patch management platform and your virtual machine, we use key-based SSH sessions, reducing the need to share credentials. As such, you'll need to fulfil the following prerequisites on each virtual machine subscribing to this service:</p>
<ul>
<li><p>An allow rule for port TCP/22 (SSH) on your virtual machine's firewall (for example, iptables).</p>
</li>
<li><p>A local user account with passwordless sudo access. You'll need to share details of this account with UKCloud when onboarding to this service.</p>
</li>
<li><p>The <code>/etc/ssh/sshd_config</code> configuration file must be configured to allow SSH access for the patching user you created in the step above.</p>
</li>
<li><p>UKCloud will provide you with a public SSH key during the onboarding process. You'll need to append this key to the <code>authorized_keys</code> file, located at <code>~/.ssh/authorized_keys</code> within the home directory of the user you created in the step above. As part of the onboarding process, UKCloud can perform this action as long as the above requirements are already met.</p>
</li>
</ul>
<h4 id="windows-server-1">Windows Server</h4>
<p>For UKCloud to correctly scan for and apply operating system patches, you must agree to enable and configure the Server Message Block (SMB) protocol by ensuring ports TCP/445 and TCP/139 are open on all virtual machines and associated operating systems opted-in to this service. Furthermore, there must be a bi-directional rule allowing port TCP/3121 on your edge appliance and operating system firewall. For further details, please see the vendor's documentation found <a href="https://forums.ivanti.com/s/article/Agentless-Patch-Scanning-Prerequisites?language=en_US">here</a>.</p>
<p>Furthermore, you must create a patching user that is an administrator on the virtual machine and has access to the Control Panel. Finally, you must enable the Remote Registry service on all virtual machines and enable Filer and Print Sharing for all networks.</p>
<h5 id="domain-joined">Domain joined</h5>
<p>If the Windows virtual machines are domain joined, the user must be using domain administrator credentials.</p>
<h5 id="standalone">Standalone</h5>
<p>If the Windows virtual machines are standalone, the device must have User Account Control (UAC) disabled.</p>
<h2 id="feedback">Feedback</h2>
<p>If you find a problem with this article, click <strong>Improve this Doc</strong> to make the change yourself or raise an <a href="https://github.com/UKCloud/documentation/issues">issue</a> in GitHub. If you have an idea for how we could improve any of our services, send an email to <a href="mailto:feedback@ukcloud.com">feedback@ukcloud.com</a>.</p>


                  <div class="row">
                  </div>
                </article>
              </div>
              
              <div class="hidden-sm col-md-2" role="complementary">
                <div class="sideaffix">
                  <div class="toggle-mode">
                      <div class="icon">
                        <i aria-hidden="true">☀</i>
                      </div>
                      <label class="switch">
                        <input type="checkbox" id="switch-style">
                        <span class="slider round"></span>
                      </label>
                      <div class="icon">
                        <i aria-hidden="true">☾</i>
                      </div>
                      <script type="text/javascript" src="../../styles/toggle-theme.js"></script>
                  </div>
                  <nav class="bs-docs-sidebar hidden-print hidden-xs hidden-sm affix" id="affix">
                  <!-- <p><a class="back-to-top" href="#top">Back to top</a><p> -->
                  </nav>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      
      <footer>
        <div class="grad-bottom"></div>
        <div class="footer">
          <div class="container">
            <span class="pull-right text-right">
              Generated by <strong>DocFX</strong><br>
              <a href="#top">Back to top</a>
            </span>
            <span>&copy <a href="https://ukcloud.com">UKCloud Ltd</a>, 2022. All Rights Reserved.<br><a href="https://ukcloud.com/legal">Privacy Policy. </a><a href="https://ukcloud.com/terms-and-conditions">Terms of Use. </a><a href="https://docs.ukcloud.com/articles/other/other-how-contribute-knowledge.html">Contribute. </a></span>
          </div>
        </div>
      </footer>
      
      <div id="cookie-cta" style="display: none;" aria-hidden="true">
        <div class="cookie-cta-inner container">
          <div class="cookie-cta-text">
            <p>
              The <strong>UKCloud Knowledge Centre</strong> uses cookies to ensure that we give you the best experience on our website. If you continue we assume that you consent to receive all cookies on this website.
            </p>
          </div>
      
          <div class="cookie-cta-action">
            <button class="cookie-cta-close button button--small">Accept</button>
          </div>
        </div>
      </div>
    </div>
    
    <script type="text/javascript" src="../../styles/docfx.vendor.js"></script>
    <script type="text/javascript" src="../../styles/docfx.js"></script>
    <script type="text/javascript" src="../../styles/main.js"></script>
    <script type="text/javascript" src="../../styles/highlight.js"></script>
    <!-- Enable Terraform syntax highlighting -->
    <script type="text/javascript" src="../../styles/terraform.js"></script>
    <script type="text/javascript">
      hljs.registerLanguage('terraform', window.hljsDefineTerraform);
      hljs.initHighlightingOnLoad();
    </script>
    
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async="" src="https://www.googletagmanager.com/gtag/js?id=UA-57433193-6"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
    
      gtag('config', 'UA-57433193-6');
    </script>
  </body>
</html>
